imports:
    - { resource: parameters.yml }
    - { resource: security.yml }

framework:
    #esi:             ~
    translator:      { fallback: %locale% }
    secret:          %secret%
    router:
        resource: "%kernel.root_dir%/config/routing.yml"
        strict_requirements: ~
    form:            ~
    csrf_protection: ~
    validation:      { enable_annotations: true }
    templating:
        engines: ['twig']
        #assets_version: SomeVersionScheme
    default_locale:  "%locale%"
    trusted_proxies: ~
    session:         ~
    fragments:       ~

# Twig Configuration
twig:
    debug:            %kernel.debug%
    strict_variables: %kernel.debug%
    globals:
        default_field:  "hepatotoxicity"
        default_searchInto:  "document"
        default_whatToSearch:  "name"
        default_whatToSearch_keyword:  "any"
        default_kind:  "pubmed"
        default_entityType: "CompoundDict"
        default_entityName:  "Troglitazone"
        default_orderby:  "hepval"
        default_compound:  "Troglitazone"
        default_entityId: "CHEBI:9753"
        default_keywordSearch:  "Lymphocite"
        default_cytochromeName: "CYP1A1"
        default_cytochromeId: "A1A5B1"
        default_markerName:  "liver enzymes"
        default_markerId:   "CID 5280352"
        default_source:   "all"





# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        [ ]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #closure:
        #    jar: %kernel.root_dir%/Resources/java/compiler.jar
        #yui_css:
        #    jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar

# Doctrine Configuration
doctrine:
    dbal:
        driver:   %database_driver%
        host:     %database_host%
        port:     %database_port%
        dbname:   %database_name%
        user:     %database_user%
        password: %database_password%
        charset:  UTF8
        mapping_types:
            enum: string
        # if using pdo_sqlite as your database driver, add the path in parameters.yml
        # e.g. database_path: %kernel.root_dir%/data/data.db3
        # path:     %database_path%

    orm:
        auto_generate_proxy_classes: %kernel.debug%
        auto_mapping: true

# Swiftmailer Configuration
swiftmailer:
    transport: gmail
    #host:      %mailer_host%
    username:  %mailer_user%
    password:  %mailer_password%
    spool:     { type: memory }

fos_user:
    db_driver: orm # other valid values are 'mongodb', 'couchdb' and 'propel'
    firewall_name: main
    user_class: EtoxMicrome\UserBundle\Entity\User
    registration:
        confirmation:
            enabled:    true
            from_email:
                address:    registration@limtox.com
                sender_name:    Limtox Registration
    resetting:
        email:
            from_email:
                address:    resetting@limtox.com
                sender_name:    Limtox Resetting
    from_email:
        address:    noreply@limtox.com
        sender_name:    Limtox


#Elasticsearch configuration
fos_elastica:
    clients:
        default: { host: andes.cnio.es, port: 9200 }
    indexes:
        etoxindex:
            client: default
            finder: ~
            types:
                abstracts:
                    mappings:
                        id: { boost: 1, type: integer }
                        pmid: { boost: 2, type: string }
                        title: { boost: 3, type: string, analyzer: my_analyzer }
                        text: { boost: 5, type: string, analyzer: my_analyzer }
                        hepval: { boost: 3, type: float }
                    persistence:
                        driver: orm
                        model: EtoxMicrome\DocumentBundle\Entity\Abstracts
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                documents:
                    mappings:
                        id: { type: integer }
                        kind: { type: string }
                        uid: { type: string, analyzer: my_analyzer }
                        sentenceId: { type: string, analyzer: my_analyzer }
                        text: { boost: 5, type: string, analyzer: my_analyzer }
                        hepval: { type: float }
                    persistence:
                        driver: orm
                        model: EtoxMicrome\DocumentBundle\Entity\Document
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                        elastica_to_model_transformer:
                            ignore_missing: true
                entity2document:
                    mappings:
                        id: { type: integer }
                        document: { type: integer }
                        name: { boost: 3, type: string, analyzer: my_analyzer }
                        qualifier: { type: string, analyzer: my_analyzer }
                        tagMethod: { type: string, analyzer: my_analyzer }
                        created: { type: date, analyzer: my_analyzer }
                        updated: { type: date, analyzer: my_analyzer }
                        curation: { type: integer }
                        hepval: { boost: 3, type: float }
                        cardval: { boost: 3, type: float }
                        nephval: { boost: 3, type: float }
                        phosval: { boost: 3, type: float }
                        patternCount: { boost: 3, type: float }
                        ruleScore: { boost: 3, type: float }
                        hepTermNormScore: { boost: 3, type: float }
                        hepTermVarScore: { boost: 3, type: float }
                        hepval: { boost: 3, type: float }

                    persistence:
                        driver: orm
                        model: EtoxMicrome\Entity2DocumentBundle\Entity\Entity2Document
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                        elastica_to_model_transformer:
                            ignore_missing: true

                abstractsWithCompounds:
                    mappings:
                        id: { boost: 1, type: integer }
                        pmid: { boost: 2, type: string }
                        title: { boost: 3, type: string, analyzer: my_analyzer }
                        text: { boost: 5, type: string, analyzer: my_analyzer }
                        hepval: { boost: 3, type: float }
                    persistence:
                        driver: orm
                        model: EtoxMicrome\DocumentBundle\Entity\AbstractWithCompound
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                        elastica_to_model_transformer:
                            ignore_missing: true
                documentsWithCompounds:
                    mappings:
                        id: { type: integer }
                        kind: { type: string }
                        uid: { type: string, analyzer: my_analyzer }
                        sentenceId: { type: string, analyzer: my_analyzer }
                        text: { boost: 5, type: string, analyzer: my_analyzer }
                        hepval: { type: float }
                    persistence:
                        driver: orm
                        model: EtoxMicrome\DocumentBundle\Entity\DocumentWithCompound
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                        elastica_to_model_transformer:
                            ignore_missing: true
                documentsWithCytochromes:
                    mappings:
                        id: { type: integer }
                        kind: { type: string }
                        uid: { type: string, analyzer: my_analyzer }
                        sentenceId: { type: string, analyzer: my_analyzer }
                        text: { boost: 5, type: string, analyzer: my_analyzer }
                        hepval: { type: float }
                    persistence:
                        driver: orm
                        model: EtoxMicrome\DocumentBundle\Entity\DocumentWithCytochrome
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                        elastica_to_model_transformer:
                            ignore_missing: true
                documentsWithMarkers:
                    mappings:
                        id: { type: integer }
                        kind: { type: string }
                        uid: { type: string, analyzer: my_analyzer }
                        sentenceId: { type: string, analyzer: my_analyzer }
                        text: { boost: 5, type: string, analyzer: my_analyzer }
                        hepval: { type: float }
                    persistence:
                        driver: orm
                        model: EtoxMicrome\DocumentBundle\Entity\DocumentWithMarker
                        provider: ~
                        finder: ~
                        listener:
                            insert: true
                            update: true
                            delete: true
                        elastica_to_model_transformer:
                            ignore_missing: true
            settings:
                index:
                  analysis:
                        analyzer:
                            my_analyzer:
                                type: lowercase
                                language: English




# Parametros globales del contenedor de dependencias
parameters:
    etoxMicrome.default_field:  "hepatotoxicity"
    etoxMicrome.default_searchInto:  "document"
    etoxMicrome.default_kind:  "pubmed"
    etoxMicrome.default_whatToSearch:  "name"
    etoxMicrome.default_whatToSearch_keyword: "any"
    etoxMicrome.default_entityType: "CompoundDict"
    etoxMicrome.default_entityName:  "Troglitazone"
    etoxMicrome.default_keywordSearch:  "Lymphocite"
    etoxMicrome.default_cytochromeName: "CYP1A1"
    etoxMicrome.default_markerName:  "liver enzymes"
    etoxMicrome.default_source:  "all"
    etoxMicrome.default_compound:  "Troglitazone"
    etoxMicrome.default_orderby:  "hepval"

    etoxMicrome.total_documents_elasticsearch_retrieval: 150

    etoxMicrome.evidences_per_page: 10
    etoxMicrome.number_of_pages: 15

#Configuration to activate twig extension utilidades
services:
    EtoxMicrome.twig.extension.utility:
        class: EtoxMicrome\DocumentBundle\Twig\Extension\UtilityExtension
        arguments:
            doctrine: "@doctrine"
            router: "@router"
        tags:
            - { name: twig.extension }
    utility:
        class: EtoxMicrome\Entity2DocumentBundle\Utility
        arguments: [ 10 ]

raul_fraile_ladybug:
    theme: modern # select the theme: base, modern or custom themes

knp_paginator:
    page_range: 5                      # default page range used in pagination control
    default_options:
        page_name: page                # page query parameter name
        sort_field_name: sort          # sort field query parameter name
        sort_direction_name: direction # sort direction query parameter name
        distinct: true                 # ensure distinct results, useful when ORM queries are using GROUP BY statements
    template:
        pagination: KnpPaginatorBundle:Pagination:sliding.html.twig     # sliding pagination controls template
        sortable: KnpPaginatorBundle:Pagination:sortable_link.html.twig # sort link template